{"./":{"url":"./","title":"AWS中文文档","keywords":"","body":" iteablue.com AWS中文文档由挨踢茶馆运营管理 深圳茶思蓝信息技术有限公司（旗下品牌-挨踢茶馆）是一家致力于云计算方向的在线培训组织，我们希望通过在线的方式，让所有人随时随地学习自己需要的云计算知识。我们也希望在你学习完一系列的课程之后，不仅仅能顺利通过相关的考试，更重要的是能学到新的知识，打开自己另一扇大门，接触一个全新的世界。 文档如有侵权地方，请与我联系：h.tea@iteablue.com 文档持续更新有一些地方未更新内容请见谅~~ 微信公众号 加入AWS学习群 var gitalk = new Gitalk({ \"clientID\": \"5fbc2a54224065a73b38\", \"clientSecret\": \"7bf7e8d512a4afec316ee39a4d83665eee35615f\", \"repo\": \"awschinawiki\", \"owner\": \"awschina\", \"admin\": [\"15b883\"], \"id\": location.pathname, \"distractionFreeMode\": false }); gitalk.render(\"gitalk-container\"); "},"docs/introduction/readme.html":{"url":"docs/introduction/readme.html","title":"入门小知识","keywords":"","body":"AWS 入门小知识 首先，你要先注册一个AWS账号 如果需要申请国内AWS账号，可以联系我们挨踢茶馆帮忙申请，有优惠😯～ 如果申请全球的账号也可以有优惠～不过优惠只针对企业用户～ 联系方式：support@iteablue.com 然后，先申请IAM用户再说； 登录到aws控制台，打开IAM控制台，开启MFA安全认证，保证根用户的安全； 申请一个IAM用户并授权此用户最大权限（AWS架构师第一准则，不要使用根用户登录控制台操作）； 用申请的IAM用户进行所有的操作，根用户在没有必要的情况不要使用，并由专人负责； 然后，熟悉AWS控制台； 把控制台上面的服务选项都点一遍，看看各个服务在哪里；方便后期使用的话知道点击哪里； 控制台的左下角可以切换语言，如果英语不好的可以换成中文显示； 然后，熟悉AWS账单管理； 切换到账单控制台，查看账单 登录账单控制台，看看账单首选项、付款方式、整合账单、税务设置、订单发票、服务抵扣金额、成本管理等等 这个要认真搞下，因为账号区分全球的和中国区账号。 1.汇款方式（信用卡（外币卡&银联卡）、电汇、） 2.发票问题（中国区可以提供发票、全球区没有发票只有收据） 3.缴费时间点（账单生成时间、最迟缴费时间） 熟悉AWS服务限制 通过控制台查看服务的限制，或者通过此链接 https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/ec2-resource-limits.html?icmpid=docs_ec2_console https://docs.aws.amazon.com/zh_cn/general/latest/gr/aws_service_limits.html 服务限制，会更好的控制对于AWS资源的合理利用，防止有心人有意或无意的无节制的开启资源。 还有就是一些其他不知道的原因，某项服务在某个region不能使用，这些都要知道；防止你们公司业务要上线了。发现那个地区没有想使用的服务；因为你测试的时候使用的region跟上线所在的那个region不一样，而且你也没有提前确认；等等原因。 熟悉AWS的support中心 技术支持，服务限制申请提高； 技术支持分为三种，开发人员、商业、企业。 具体收费模式请看链接：https://aws.amazon.com/cn/premiumsupport/plans/ 还有一种技术支持，就是安排专门的架构师服务于你们公司的，But你公司必须在AWS消费很多大洋才可以伺候你 当然，也可以通过我们挨踢茶馆进行技术支持，欢迎联系​​：support@iteablue.com 玩转AWS服务 基础玩法 EC2、ELB、S3、ElastiCache（redis）、RDS（MySql） 建议你们先熟悉上面几个服务，使用默认选项（默认VPC、安全组）等创建简单的三层服务并测试。 因为几乎迁移到AWS，使用的服务属上面几项最多，当然也是最常用的服务；先熟悉熟悉基本情况，打好基础。 中级玩法 **首先！！！全面深入学习VPC** 一定要学明白VPC，因为AWS大多数服务，多AZ、高可用，都是基于VPC网络区分开的。 还有个问题就是，强迫症选手做事情是不会选择默认的选项去做事的。。。 通过自定义VPC，进行网络划分；各个服务做使用的网络不同（公有子网、私有子网），后期扩展。 这样做的好处就是，你可以清楚的了解到你们整个架构的划分、业务划分、网络划分、安全防护、后期如何进行架构扩展，都能清楚的了解到； 通过自定义的VPC网络进行服务创建，先把基础那几项服务玩一遍；再去测试其他的服务。 高级玩法 DevOps ECS、EKS Serverless 面试AWS职位 - . - 入门小视频 AWS入门视频 .video-js .vjs-tech {position: relative !important;} var gitalk = new Gitalk({ \"clientID\": \"5fbc2a54224065a73b38\", \"clientSecret\": \"7bf7e8d512a4afec316ee39a4d83665eee35615f\", \"repo\": \"awschinawiki\", \"owner\": \"awschina\", \"admin\": [\"15b883\"], \"id\": location.pathname, \"distractionFreeMode\": false }); gitalk.render(\"gitalk-container\"); "},"docs/operations_management/console_view.html":{"url":"docs/operations_management/console_view.html","title":"控制台介绍","keywords":"","body":"AWS控制台界面介绍 首部栏 底部栏 服务 这里可以看到AWS的所有服务，也可以在搜索栏进行搜索 快速定位服务 可以看到使用服务的历史记录 资源组 通过启动服务时设置的标签进行资源组分类 什么是资源组（https://docs.aws.amazon.com/zh_cn/ARG/latest/userguide/welcome.html） 资源组使得同时在⼤大量量资源上管理理和⾃自动化任务变得容易易 资源组是同⼀一AWS区域中与查询中提供的条件相匹配并且共享⼀一个或多个标签或标签部分的AWS资源的集合。 您可以在资源组控制台中构建查询，或者将查询作为参数传递给AWS CLI 中的资源组命令 如果您管理理⼤大量量相关资源（如组成应⽤用程序层的EC2 实例例），则可能需要对这些资源⼀一次执⾏行行批量量操作。 批量量操作的示例例包括： ​ 应⽤用更更新或安全补丁。 ​ 升级应⽤用程序。 ​ 打开或关闭到⽹网络流量量的端⼝口。 ​ 从您的实例例队列列收集特定的⽇日志和监控数据。 快捷访问窗口 点击图中图钉的按钮，可以把常用的服务拖到如图中的位置； 后期直接点击此处就可以快速访问到访问； 用户 根用户所显示： 我的账号、我的组织、我的服务配额、我的账单控制面板、订单发票、我的安全凭证 我的账号里面保证注册邮箱、用户ID、等个人信息 组织账号 1 AWS Organizations 是⼀一项账户管理理服务，使您能够将多个AWS账户整合到您创建并集中管理理的组织中。 2 AWS Organizations 包含整合账单和账户管理理功能，通过这些功能，您能够更更好地满⾜足企业的预算、安全性和合规性需求。 3 您可以创建成员账户，还可以邀请现有账户加⼊入您的组织。您可以将这些账户分到不不同的组中，然后应⽤用基于策略略的控制。 4 https://docs.aws.amazon.com/zh_cn/organizations/latest/userguide/orgs_introduction.html 账单成本管理理 1 AWS Billing and Cost Management是⼀一项服务，⽤用于⽀支付AWS 账单、监控使⽤用量量和编制成本预算。 2 AWS 将⾃自动向您在注册新的AWS 账户时提供的信⽤用卡收费。费⽤用每个⽉月都会显示在您的信⽤用卡账单上。 3 您可以在Billing and Cost Management控制台中的付款⽅方式⻚页⾯面上查看或更更新信⽤用卡信息并指定供AWS 收取费⽤用的其他信⽤用卡。 4 https://docs.aws.amazon.com/zh_cn/awsaccountbilling/latest/aboutv2/billing-what-is.html 安全凭证 1 ssh key ⽤用户访问密钥 2 开发者使⽤用，配置awscli sdk 3 https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/id_credentials_access-keys.html?icmpid=docs_iam_console 4 git 认证commit git使⽤用http 开发者使⽤用，配置code commit service 5 https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/id_credentials_ssh-keys.html?icmpid=docs_iam_console#ssh 切换⻆角⾊色 1 当您创建⽤用于跨账户访问的⻆角⾊色时，您在拥有⻆角⾊色和资源的账户(信任账户) 和包含⽤用户的账户(可信账户) 之间建⽴立了了信任。 2 为此，可将可信账号指定为该⻆角⾊色的信任策略略中的Principal。 3 这可能会允许可信账户中的任何⽤用户代⼊入该⻆角⾊色。 4 要完成配置，可信账户的管理理员必须为该账户中的特定组或⽤用户提供切换到该⻆角⾊色的权限。 5 请注意，您只能在以IAM ⽤用户身份登录时切换⻆角⾊色。如果您以AWS 账户根⽤用户身份登录，则⽆无法切换⻆角⾊色。 6 https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/id_roles_use_permissions-to-switch.html?icmpid 区域 1 两种账号：全球账号、中国账号 2 国外账号：如图显示， 3 国内账号：只有两个区域，北北京（2个AZ）和宁夏（3个AZ） 4 AWS 全球基础设施围绕区域和可⽤用区(AZ) 构建。我们提供两种类型的区域：AWS 区域和AWS 本地区域。 5 AWS 区域提供多个（通常3 个）在物理理上独⽴立且隔离的可⽤用区，这些可⽤用区通过延迟低、吞吐量量⾼高且冗余性⾼高的⽹网络连接在⼀一起。 6 通过这些可⽤用区，AWS 客户可以更更加轻松且更更有效地设计和操作应⽤用程序和数据库。 7 与传统的单⼀一数据中⼼心基础设施和多数据中⼼心基础设施相⽐比， 8 这些应⽤用程序和数据库具有⾼高可⽤用性、容错能⼒力力和可扩展性。 9 AWS 本地区域是单⼀一的数据中⼼心区域，旨在补充现有的AWS 区域，客户希望在其中获得该AWS 区域的灾难恢复选项。 10 与所有AWS 区域类似，AWS 本地区域与其他AWS 区域完全隔离。 11 AWS 云在全球20 个地理理区域内运营着61 个可⽤用区。 12 AWS 边缘⽹网络站点：cdn cloudfort 13 AWS 全球基础设施： 14 https://amazonaws-china.com/cn/about-aws/global-infrastructure/ 支持中心 ⽀支持中⼼心，⽇日常遇到问题，提问case 1 如果没有购买商业⽀支持，只能提两种⼯工单， 2 ⼀一种是账户和账单⽀支持相关的，另⼀一种就是服务限额的增加 论坛，aws技术论坛 ⽂文档，aws官⽅方⽂文档 培训，aws官⽅方培训 其他资源 语言切换 根据自身需要切换相应的语言 "},"docs/operations_management/bill_management.html":{"url":"docs/operations_management/bill_management.html","title":"账单管理","keywords":"","body":"账单管理 AWS账单属于后付费 收费方式：两种，信用卡和电汇（暂时只用过两种） 账单生成： 每个月的账单会在下个月的3-4号生成账单，并发送到你注册账号的邮箱中，账单生成后，30天内完成付款 例如： 你1月份的账单会在2月3-4号生成，最晚在3月底缴清即可（具体看账单控制台可以看到） 支付方式： 信用卡支付： 小额费用可以直接使用信用卡支付。 国内个人信用卡限额，超过5万美金的话，不能再使用信用卡支付 电汇支付： 电汇只能在使用信用卡支付后，第二个月申请变更为电汇支付， 新开账号的时候直接向AWS申请直接为电汇方式 国外账单 国内账单 注意！ 在电汇的时候，要在备注信息填上账单ID，这个方便aws对账，我们在收到电汇回执单后，需要跟AWS发邮件进行对账。因为AWS每天会收到很多账单汇款，无法区分都是谁汇款过来的。 （要不你打电汇过去，也不知道你谁付款的，电汇完毕成功后也要留个电汇的回执单，已证明电汇成功） 国外账号，电汇到AWS亚洲区域银行的一个账号，这个在账单上面可以看到 国外汇款后，拿到回执单了需要提个case进行抵账确认aws已收到汇款 国内账号，一个是汇款到光环新网，一个是西云数据 国外账单 国内账单 关于发票问题： 全球账号： 国外账号是没有发票的，只有收据。就是每个月3-4号发送到你邮箱的那个账单。 账单上面会显示你的消费明细，和需要汇款的地址（银行账户相关信息） 中国账号： 中国账号都是对公账号进行汇款 发票抬头为你注册账号时使用的公司名称，公司名称为什么，发票抬头就是什么 申请发票流程说明 "},"docs/operations_management/user-permissions-env.html":{"url":"docs/operations_management/user-permissions-env.html","title":"工作环境、使用角色和所属权限","keywords":"","body":"用户角色、职责划分、工作环境 测试环境 预发布环境 生产环境 AWS账号所有者： 管理账号，开通IAM用户 AWS账号管理人员 日常运维管理工作者、账单管理（除根用户外最大的权限的用户） 只读用户 只能查看AWS console控制台 开发用户 开发工作人员 部署用户 环境设计和部署管理 "},"docs/introduction/services-limits.html":{"url":"docs/introduction/services-limits.html","title":"服务限制介绍","keywords":"","body":"服务限制 Amazon EC2 提供您可以使用的不同资源，例如实例和卷。 在您创建 AWS 账户时，AWS 会针对每个区域中的这些资源设置限制。此页面列出您在 亚太区域 (东京) 中的 EC2 服务限制。 1.控制台 打开如下图，所选控制项 2.限制 如下图，一些常见的限制，你们可以拉到下面去看那些有限制， 如果需要提高限制的话。你们就要在请求提高限制哪里，进行申请 点击请求提高限制后，会跳转到support支持的控制台。 3.Support页面 如上图是申请提高限制的页面 1、选择服务限额增加 2、地区，选择你需要提高限制的地区，也就是你EC2在那个区域买的就提高哪里 3、实例类型，选择你需要的实例配置 4、限制，这里默认就是实例限制，不用修改。默认即可 5、新的限制值，这里就是你想要申请多少个就在这里写多少个。 6、严重这里，是说明是这个事情是否有多着急，就是一个事情的级别，着急的话就选严重，不着急的话就选一般了 7、用例说明，说明一下你为什么要申请提高限制，我一般就是写：由于业务扩张，限制需要增加EC2实例等等。 8、支持语言，这里选择英语。因为没中文。。（因为只有英语和日语） 9、联系方式。这里选择web如果你英语好也可以选择电话。 10、点击提交 等着就行了。。。 注意： 第一次申请的时候，可以申请20台。因为你第一次申请数据过多的话，他们后台会问的，反正就是特别麻烦。 还有如果你发现EC2实例不够用的话，最好还是早1-2天去申请，这个走流程需要时间。或者你们要是有对接的销售，可以把这个工单的单号告诉他，让他们在后台帮你催下。 第一次申请20台后，后期再去申请50台或者100台的话就会很快的。 "},"docs/introduction/aws-infrastructure.html":{"url":"docs/introduction/aws-infrastructure.html","title":"AWS全球基础设施","keywords":"","body":"AWS 全球基础设施 AWS Global Infrastructure的设计和构建旨在提供最灵活、可靠、可扩展和安全的云计算环境， 并提供当今最高质量的全球网络性能。 区域 地理位置 至少由两个可用区组成 可用区 数据中心的群集 与其他可用区的故障相隔离 160+ AWS边缘站点 通常支持如下AWS服务的本地接入点： Amazon Route 53 Amazon CloudFront（CDN） 每个数据中心、可用区和 AWS 区域都通过专门打造的、可用性高和低延迟的私有全球网络基础设施进行互连。 该网络建立在全球性的、完全冗余、且并行的 100 GbE 城域光纤网络上，通过横跨大西洋、太平洋和印度洋，以 及地中海、红海和南中国海的跨洋电缆连接。 使用此交互式地图查看AWS的基础设施 AWS中国总部在北京，上海深圳都有办公室 AWS中国北京区域由光环新网运营（两个AZ） AWS中国宁夏区域由西云数据运营（三个AZ） "},"docs/introduction/aws-tips.html":{"url":"docs/introduction/aws-tips.html","title":"AWS一些不必要知道的问题","keywords":"","body":"我也不知道有没有必要知道🤷‍♂️ AWS有三个不同的独立运营系统，不同的账号 1、AWS Global Region 全球账号，一般大家都用这个区域的服务；你懂的 全球账号不区分个人和企业，你爱怎么用就怎么用。只要按时付费就行了 2、US Federal Government Cloud 美国联邦政府使用 3、AWS China Region 中国企业玩家使用的。。。个人不让玩 AWS账号，每个账号都有不同的可用区。 但是，张三账号的A、B、C可用区，与李四账号的A、B、C可用区物理位置上可能不同 AWS 通过 nat-gateway 上网会暴露出一个IP出来，但是这个IP只会接受从这个IP出去的流量，如果不是从这个IP出去的流量是无法进来的。（对于安全方面来分析此IP暴露是否安全，此IP算是aws的基础服务，除非你可以把此区域整个ddos掉，要不这个IP肯定能用。） AWS Linux系统 在制作AMI后，新启动的实例密码（密钥）会自动生成。 但是，Windows系统在制定AMI后，新启动的实例，密码是原来系统的登陆密码。如果需要变成自动更新密码，需；要修改系统的一个配置文件 如果是实例内网连一些aws服务的话，可以使用endpoint服务。这样服务之间都是走的内网，而且传输速度很快，安全性也很高，要不你走互联网，还要收你流量费。 AWS support 服务是可以支持中文的，不过你要在主题上面标注一些使用普通话交流，AWS中文支持团队都是在台湾 AWS CloudTrail 服务很强大的，只要你玩明白了，谁的锅就是谁的锅 AWS提供免费的架构咨询服务，由AWS架构师与客户的开发人员、外包服务商和一起评估是否可以满足您的技术要求。我们也提供收费的技术支持，或者推荐第三方APN公司给客户。 (免费的架构咨询服务是指：AWS架构师指导客户公司的技术人员进行实操。) AWS是不限制internet带宽的，按照实际发生的流量计费。简单来说流入AWS的流量免费，目前流出AWS的流量0.93元/GB。流量计费和其他（如EC2）计费是分开的。对于多数的业务，按照流量比固定带宽更加划算，您可以根据自己的使用量简单估算一下。 "},"docs/compute/":{"url":"docs/compute/","title":"计算","keywords":"","body":"计算服务 计算优势 灵活 随计算需求的变更扩充容量​​​ 弹性 调整计算容量大小 安全 设定安全性和网络存取权 降低成本 按容量使用付费 什么是EC2？ Amazon EC2，也被称为Amazon Elastic Compute Cloud，用于在Amazon Web Services（AWS）云中提供大小可调的计算容量 使用Amazon EC2启动虚拟机，把它当成虚拟服务器，或将数千个虚拟服务器当成你自己的数据中心，并可以配置所有相关的安全和联网设置； Amazon EC2 可以将自动向上扩展以增加容量，从而处理额外的流量； Amazon EC2环境被称为实例，实例类型包罗万象，它们的CPU处理能力、内存容量、存储大小和联网能力的组合情况各不同； AWS还为您的实例提供预配置模版称之为亚马逊系统映像（AMI），这些AMI模版可以只包含一个操作系统，如Windows或Linux或者可以包含各种组件、操作系统和预安装软件包 Amazon EC2实例的计算能力范围从小型的“micro”实例（用于处理小型任务）到高性能“x-large”实例（用于处理数据仓库之类的任务）不等 您可以根据所需的内存容量或计算能力混合搭配不同的实例类型，甚至有些实例类型还具有较高的图形处理能力。 什么是 ELB？ Elastic Load Balancing 跨多个可用区中的多个目标（如 Amazon EC2 实例、容器和 IP 地址）分发传入应用程序或网络流量。Elastic Load Balancing 会在应用程序的传入流量随时间的推移发生更改时扩展负载均衡器，并可自动扩展以处理大部分工作负载。 Elastic Load Balancing 支持三种类型的负载均衡器：Application Load Balancer、Network Load Balancer 和 Classic Load Balancer。可以根据应用程序需求选择负载均衡器。 var gitalk = new Gitalk({ \"clientID\": \"5fbc2a54224065a73b38\", \"clientSecret\": \"7bf7e8d512a4afec316ee39a4d83665eee35615f\", \"repo\": \"awschinawiki\", \"owner\": \"awschina\", \"admin\": [\"15b883\"], \"id\": location.pathname, \"distractionFreeMode\": false }); gitalk.render(\"gitalk-container\"); "},"docs/compute/how-to-launch-ec2-instance.html":{"url":"docs/compute/how-to-launch-ec2-instance.html","title":"如何启动一个EC2实例","keywords":"","body":"如何启动一个EC2实例 注：这里使用的是默认VPC启动的 1.打开EC2控制台 点击启动就是开始创建EC2实例，AWS没有创建的字眼，启动就是创建； 2.选择AMI AWS还为您的实例提供预配置模版称之为亚马逊系统映像（AMI），这些AMI模版可以只包含一个操作系统，如Windows或Linux或者可以包含各种组件、操作系统和预安装软件包 根据自身需要或者业务上面的需要，进行选择镜像；也可以查看如何选择AMI 3.选择实例类型 Amazon EC2实例的计算能力范围从小型的“micro”实例（用于处理小型任务）到高性能“x-large”实例（用于处理数据仓库之类的任务）不等 您可以根据所需的内存容量或计算能力混合搭配不同的实例类型，甚至有些实例类型还具有较高的图形处理能力。 根据业务需求，选择实例类型，AWS没有自定义配置的选择实例。只能通过控制台上面显示的进行选择。 查看官方文档实例类型说明 https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/instance-types.html 4.实例配置详情 ！！这里是最重要的，我们是测试dome这边全部默认，不选择 注意：实例的数量、网络、子网、自动分配公有IP、IAM角色、启用终止保护等后面会细讲； 5.添加存储 系统盘和数据盘的选择；默认是8G 6.添加标签 标签分类，对于后期管理服务器很防备 7.配置安全组 可以选择新建或选择现有的安全组 通过一些设置，您可以指定协议、端口和源IP访问，以便能够使用安全组到达您的实例，安全组与传统的防火墙类似，并且它们非常简单易用 8.核查实例启动 检查刚才选择的配置，是不是你所需要的。 9.选择密钥 ！！注册 这里一定要确保你的密钥在你手上，如果没有的话，无法再次找回。（也不是那么绝对，但是太麻烦，几乎不能找回） 创建新的密钥对，创建后一定要下载密钥对到本地电脑上； 选择其他密钥，确保你选择的密钥对在你电脑上或者其他同事电脑上； 选择好密钥对后，并保证本地PC有密钥，可以点击启动实例了。 密钥对所起的作用是什么？ 密钥对是安全功能，可用于在实例创建后控制对该实例的访问。如果您没有合适的密钥对，您将不能访问该实例 10.控制台查看启动的实例 了解EC2控制台实例信息 Name、实例ID、实例类型、可用区、实例状态、状态检查、警报、公有DNS、公有IP等、 安全组、AMIID、VPC、私有子网、网络接口等信息 "},"docs/compute/how-choose-ami.html":{"url":"docs/compute/how-choose-ami.html","title":"如何选择AMI镜像","keywords":"","body":"如何选择AMI镜像 现在AWS软件市场上有的镜像如下： Windows 2003R2/2008/2008R2/2012/2012R2/2016 Amazon Linux Debian Suse CentOS Red Hat Enterprise Linux Ubuntu 1.快速启动 如下图，建议不选择这个里面AMI来直接跑生产，仅用来测试使用；也可以进行初始化后做一个AMI 2.我的AMI 这个选项中存放的是你自己定义的AMI 3.AWS Marketplace AWS商店的AMI优先选择使用，可以直接在搜索框按照名称直接搜索 4.社区 AMI 此选项内的AMI由个人上传的，也有组织上传的，反正是五花八门的，不是很安全； 5.根据需求，进行相关的匹配得到想要的AMI 6.仅免费套餐 AWS免费提供使用的AMI 7.选择AMI注意事项 选择提交人为官方提供的AMI 比如， AmazonWebServices的 CentOS就选择Centos.org Ubuntu选择Canonical Group Limited 这些提交人都是官方的 还有一些第三方提供的，无法保证安全 个人建议 使用一下AMI做实验 CentOS、ubuntu、windowsserver "},"docs/compute/How_do_I_remotely_connect_to_create_an_ec2_instance.html":{"url":"docs/compute/How_do_I_remotely_connect_to_create_an_ec2_instance.html","title":"如何远程连接创建的EC2实例","keywords":"","body":"如何远程连接创建的EC2实例 准备工具： Mac&Linux端： 直接使用终端命令行即可 Windows端： Putty Xshell 确认下实例使用的密钥名称 如下图，选中需要连接的实例，点击连接查看如何连接。 注意！ 使用默认的用户名 https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/AccessingInstancesLinux.html 以Mac环境连接Linux环境 注意key的权限 和登陆的用户名 使用默认的用户名 https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/AccessingInstancesLinux.html 以Mac环境连接Windows环境 确认Key名称和公有DNS（IP地址） 1.点击下载远程桌面文件 2.获取密码，找到相应的key后，点击解压密码即可生成密码 3.密码显示 5.微软远程桌面下载地址 https://rink.hockeyapp.net/apps/5e0c144289a51fca2d3bfa39ce7f2b06/ Windows环境SSH到Linux环境 "},"docs/compute/how-to-login-ec2-with-password.html":{"url":"docs/compute/how-to-login-ec2-with-password.html","title":"如何使用密码登陆EC2实例","keywords":"","body":"如何使用密码登陆EC2实例 有时候需要在不同的办公环境登陆EC2实例，但是无法来回复制密钥到新的笔记本或者PC上，所以我们可以使用密码的方式登陆EC2-Linux机器 要启用密码身份验证，请创建一个密码，更新 /etc/ssh/sshd_config 文件，然后重新启动 SSH 服务。 注意：使用基于密码的登录而非密钥对身份验证具有安全隐患。因此，不建议使用基于密码的登录。 另外，最佳实践是最大限度地减少与您的实例关联的安全组规则的源 IP 地址以防止 SSH 攻击。 首先通过密钥登陆到实例上； [centos@jump ~]$ pwd /home/centos [centos@jump ~]$ sudo -i ##通过sudo切换到root [root@jump ~]# 设置密码 [root@jump ~]# passwd Changing password for user root. #设置root密码 New password: #输入密码第一次 Retype new password: #输入密码第二次 passwd: all authentication tokens updated successfully. 编辑 /etc/ssh/sshd_config # vim /etc/ssh/sshd_config ... PasswordAuthentication yes #允许使用密码登陆，由no改成yes PermitRootLogin yes #如果需要使用root登陆，由no改成yes，如果不需要就不要动 ... 重新启动 SSH 服务 # systemctl restart sshd #CentOS7重启SSH服务 # service sshd restart #CentOS5-6重启SSH服务 测试使用密码登陆 ➜ ~ ssh root@3.114.27.143 root@3.114.27.143's password: #输入密码 Last login: Tue Nov 5 05:43:22 2019 from 111.202.93.98 [root@jump ~]# 登陆用户 root 远程机器IP 3.114.27.143 "},"docs/compute/how-to-choose-instance-types-and-instance purchasing-options.html":{"url":"docs/compute/how-to-choose-instance-types-and-instance purchasing-options.html","title":"如何选择实例类型和购买选项","keywords":"","body":"如何选择实例类型和购买选项 实例类型 通用实例 计算优化型实例 内存优化型实例 存储优化型实例 加速计算实例 更多详情请查看官方文档https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/instance-types.html 实例购买选择 按需实例（On-Demand Instances ） 按秒为启动的实例付费。 预留实例 （Reserved Instances）以大幅折扣购买一年期到三年期的始终可用的实例。 计划实例 （Scheduled Instances）以一年为期限购买按指定重复计划始终可用的实例。 Spot 实例 （Spot Instances）请求未使用的 EC2 实例，这可能会显著降低您的 Amazon EC2 成本。 专用主机 （Dedicated Hosts）为完全专用于运行您的实例的物理主机付费，让您现有的按插槽、按内核或按 VM 计费的软件许可证降低成本。 专用实例 （Dedicated Instances）为在单一租户硬件上运行的实例按小时付费。 容量预留 （Capacity Reservations）可在特定可用区中为 EC2 实例预留容量，持续时间不限。 "},"docs/compute/how-do-I-allocate-eip-and-bind-to-ec2.html":{"url":"docs/compute/how-do-I-allocate-eip-and-bind-to-ec2.html","title":"如何分配弹性IP（EIP），并绑定到EC2实例","keywords":"","body":"如何分配EIP，并绑定到EC2 弹性 IP 地址 是专为动态云计算设计的静态 IPv4 地址。弹性 IP 地址与您的 AWS 账户关联。借助弹性 IP 地址，您可以快速将地址重新映射到您的账户中的另一个实例，从而屏蔽实例故障。 1.进入EC2控制台 打开 Amazon EC2 控制台 https://console.aws.amazon.com/ec2/ 2.分配新地址 3.把分配的地址与EC2关联 选中需要关联的eip，选择操作，关联地址 4.关联地址 选择资源类型：实例 实例：需要绑定eip的实例，如果你在实例备注name这里就会显示出来 私有IP：这边会在你选中相应的实例后，会显示它的私有IP地址 5.关联成功 "},"docs/compute/what-is-the-elb.html":{"url":"docs/compute/what-is-the-elb.html","title":"如何理解负载均衡器（ELB）","keywords":"","body":"如何理解ELB 通俗来说，ELB类似于nginx、lvs、haproxy等等 Elastic Load Balancing 跨多个可用区中的多个目标（如 Amazon EC2 实例、容器和 IP 地址）分发传入应用程序或网络流量。Elastic Load Balancing 会在应用程序的传入流量随时间的推移发生更改时扩展负载均衡器，并可自动扩展以处理大部分工作负载。 负载均衡器优势 负载均衡器跨多个计算资源 (如虚拟服务器) 分布工作负载。使用负载均衡器可提高您的应用程序的可用性和容错性。 可以根据需求变化在负载均衡器中添加和删除计算资源，而不会中断应用程序的整体请求流。 您可以配置运行状况检查，这些检查可用来监控计算资源的运行状况，以便负载均衡器只能将请求发送到正常运行的目标。此外，您可以将加密和解密的工作交给负载均衡器完成，以使您的计算资源能够专注于完成主要工作。 Elastic Load Balancing 支持三种类型的负载均衡器： Application Load Balancer（7层应用程序负载均衡器） Network Load Balancer （4层网络负载均衡器） Classic Load Balancer（传统负载均衡器）#这个使用很少了 可以根据应用程序需求选择不同类型的负载均衡器 底层实现原理 1、ELB由负载均衡器和目标组组成 2、⭐️A、B为两个安全组。 3、负载均衡器里面的实例地址IP也占用VPC子网的IP，并且负载均衡器里面的实例可以自动伸缩；负载均衡器内的实例对用户不可见； 4、VPC子网划分，IP使用数量，也要考虑elb的自动伸缩的场景； 5、目标组里面的实例无法做到自动伸缩，需要配合AS伸缩； 6、目标组的实例，所在的子网可以与负载均衡器的子网相同或者不通，但是必须所在的AZ是一样的。 7、ELB占用的IP你可以在EC2控制台，网络与安全、网络接口这里查询到 "},"docs/compute/how-to-create-alb.html":{"url":"docs/compute/how-to-create-alb.html","title":"如何创建ALB-应用程序负载均衡","keywords":"","body":"如何创建ALB（应用程序负载均衡器） 1.进入ELB控制台 2.选中要创建负载均衡的类型 3.填写ALB信息 名称：就是NLB的标识名称 模式：如果是需要对外Internet访问就选择面向internet 如果是内网服务使用，就选择内部 侦听器：就是填写监听的端口，端口号，自定义 可用区：（这个比较重要） 你后端的那些机器在那个VPC、子网、可用区内，这里你就选哪个 例如下面。我的两台web在默认VPC内的，az-1a和az-1d内，所以我在ALB选择可用区的话，就选择az-1a和az-1d 查看后端实例所在的可用区 ALB设置可用区 4.配置安全组 此安全组跟实例的安全组不是一个。详情区分请看，如何理解使用安全组和NACL 5.设置目标组 目标组：就是后端使用机器的群组，新建或者选择现有的 名称：标记性名称 协议：就是ALB到后端服务器之前的协议。 端口：这个是后端服务的端口。如果是访问NLB的80端口转到后端机器8080的端口。这里就要填8080了。80--》8080 目录类型：这里要选择instance（实例类型） 6.注册目标 这里选择的要注意： 1、在下方选择相应的实例，记住你这里的机器所处的可用区必须要和前面选的可用区是一样的，要不无法使用 2、选择好实例后，记住！一定要点击添加到已注册！！如果直接点击下一步，这个后端实例就没有添加到目标群组里面 7.检查之间设置的是否有问题 检查之前配置的信息 这里要注意的是子网。如果前面可用区，和后端的实例不是在一个可用区的话，这里会显示一个叹号！！ 8.创建过程中的状态 两处都是初始化过程中 9.创建成功状态 在状态为 active和healthy时，再去访问连接。如果状态不是这样的话，就要排查是否有其他问题 10.如何访问创建好的ALB 11.浏览器访问 "},"docs/compute/how-change-ec2-type.html":{"url":"docs/compute/how-change-ec2-type.html","title":"如何变更EC2实例类型","keywords":"","body":"如何变更EC2实例类型 使用场景： EC2实例类型的变更，由小变大， 比如，由2c4g变为 4c8g 查看实例状态 在变更实例时，需要把此实例停止。（stop状态）才能变更 确认变更之前的实例类型 查看变更之后的实例类型 停止实例 1、选中需要操作的实例 2、操作、实例状态、停止 如下状态后就可以变更实例类型 变更实例类型 1、选择需要操作的实例 2、操作、实例设置、更改实例类型 由t2.micro 变更为t3.micro 启动实例 启动实例即可，进行系统查看变更后的实例配置信息 "},"docs/compute/how-to-create-ami.html":{"url":"docs/compute/how-to-create-ami.html","title":"如何创建AMI（EC2实例镜像）","keywords":"","body":"如何创建AMI（实例映像） 1.选择需要注册AMI的机器 如下图操作，点击创建映像 2.填写映像信息 注意！！ 这里的不重启 一定要勾选上。要不在做映像的时候，自动重启你的机器。 3.查看创建的AMI 需要等会才会生成 4.使用创建好的AMI启动新的实例 在AMI控制台内选择使用刚才创建好的AMI，活着直接在实例控制台启动一个实例，在选择AMI中，我的AMI选择刚才创建的AMI 直接在EC2控制台启动新的实例，选择AMI控制台也能看到 "},"docs/compute/how-to-ami-copy-to-other-region.html":{"url":"docs/compute/how-to-ami-copy-to-other-region.html","title":"如何把AMI复制到其他区域","keywords":"","body":"如何把AMI复制到其他区域 1.打开EC2控制面板，找到需要复制的AMI 选择需要迁移的AMI，操作-复制AMI；如下图，注意所在地区 2.选择复制的目标区域 我这里是 东京复制到新加坡 加密选项，可选也可不选。此选择可以作为制作加密AMI的重要部分 3.点击完成后，切换到相应的区域（新加坡）内，查看AMI；如下图，注意所在地区 查看复制到的AMI，等到复制成功后，就可以只是此AMI创建新的EC2 注意： 如果是两个账号之间分享ami。这里在显示到可用状态后，需要在复制一下此ami到本地区。 "},"docs/compute/amazon-ecr.html":{"url":"docs/compute/amazon-ecr.html","title":"Amazon ECR","keywords":"","body":"Amazon-ECR Amazon Elastic Container Registry (Amazon ECR) 是一项托管 AWS Docker 镜像仓库服务，安全、可扩展且可靠。通过使用 AWS IAM，Amazon ECR 支持具有基于资源的权限的私有 Docker 存储库，以便特定用户或 Amazon EC2 实例可以访问存储库和镜像。开发人员可以使用 Docker CLI 推送、拉取和管理镜像。 Docker Hub作为Docker默认官方公共镜像； 如果想搭建自己的私有镜像仓库，官方提供registry镜像或harbor，使搭建私有仓库非常简单 ECR是AWS托管的私有镜像仓库； "},"docs/compute/amazon-ecs.html":{"url":"docs/compute/amazon-ecs.html","title":"Amazon ECS","keywords":"","body":"Amazon-ECS Amazon Elastic Container Service (Amazon ECS) 是一项高度可扩展的快速容器管理服务，它可轻松运行、停止和管理集群上的 Docker 容器。您可以通过使用 Fargate 启动类型启动服务或任务，将集群托管在由 Amazon ECS 管理的无服务器基础设施上。若要进行更多控制，您可以在使用 EC2 启动类型进行管理的 Amazon Elastic Compute Cloud (Amazon EC2) 实例集群上托管您的任务。 "},"docs/compute/amazon-eks.html":{"url":"docs/compute/amazon-eks.html","title":"Amazon EKS","keywords":"","body":"Amazon-EKS Amazon Elastic Kubernetes Service (Amazon EKS) 是一项托管服务，借助该服务，您可以轻松在 AWS 上运行 Kubernetes，而无需安装和操作您自己的 Kubernetes 群集。 Amazon EKS 跨多个可用区运行 Kubernetes 控制层面实例以确保高可用性。Amazon EKS 可以自动检测和替换运行状况不佳的控制层面实例，并为它们提供自动版本升级和修补。 Amazon EKS 还与许多 AWS 服务集成以便为您的应用程序提供可扩展性和安全性，包括： 用于容器镜像的 Amazon ECR 用于负载分配的 Elastic Load Balancing 用于身份验证的 IAM 用于隔离的 Amazon VPC AWS EKS,master节点进行托管，worker节点根据需求进行创建；worker底层调用ec2API进行创建ec2实例 "},"docs/compute/amazon-lightsail.html":{"url":"docs/compute/amazon-lightsail.html","title":"Amazon Lightsail","keywords":"","body":"Amazon Lightsail Lightsail适用于开发人员。您可以为Lightsail实例选择一个映像，该映像可以启动您的dev项目，因此您不必花费太多时间安装软件或框架。 如果您是从事个人项目的个人开发人员或业余爱好者，Lightsail可以帮助您部署和管理基本的云资源。您可能还对学习或尝试使用虚拟机或网络等云服务感兴趣。Lightsail提供了一种快速入门的方法。 Lightsail的图像具有基本操作系统，开发堆栈（如LAMP，LEMP（Nginx）和SQL Server Express）以及应用程序（如WordPress，Drupal和Magento）。 随着项目的增长，您可以添加块存储磁盘并将其附加到您的Lightsail实例。您可以为这些实例和磁盘创建快照，并轻松地从这些快照创建新实例。您还可以对等VPC，以便您的Lightsail实例可以使用Lightsail之外的其他AWS资源。 您还可以创建Lightsail负载平衡器并附加目标实例以创建高可用性应用程序。您还可以将负载均衡器配置为处理加密（HTTPS）流量，会话持久性，运行状况检查等。 Lightsail支持的系统 Linux Amazon Linux 2017 CentOS 7 Ubuntu Server 16 and 18 Free BSD 10 Debian 8 and 9 openSUSE Leap Windows Windows Server 2016 Windows Server 2012 R2 CMS applications in Lightsail Lightsail支持的CMS WordPress powered by Bitnami WordPress Multisite powered by Bitnami Drupal powered by Bitnami Joomla powered by Bitnami Lightsail中的电子商务和项目管理应用程序 Magento powered by Bitnami (eCommerce) Redmine (Project Management) Lightsail中的开发堆栈 LAMP stack (PHP 7) powered by Bitnami Node.js powered by Bitnami MEAN Stack powered by Bitnami (HVM) LEMP Stack (Nginx) by Bitnami GitLab powered by Bitnami (HVM) Plesk Hosting Stack on Ubuntu SQL Server 2016 Express "},"docs/database/":{"url":"docs/database/","title":"数据库","keywords":"","body":"数据库服务 数据库优势 简管 简单轻松管理 可靠 可用且耐用 灵活 可高度扩充 安全 快速且安全​​​​​ var gitalk = new Gitalk({ \"clientID\": \"5fbc2a54224065a73b38\", \"clientSecret\": \"7bf7e8d512a4afec316ee39a4d83665eee35615f\", \"repo\": \"awschinawiki\", \"owner\": \"awschina\", \"admin\": [\"15b883\"], \"id\": location.pathname, \"distractionFreeMode\": false }); gitalk.render(\"gitalk-container\"); "},"docs/database/how-to-create-mysql.html":{"url":"docs/database/how-to-create-mysql.html","title":"如何创建MySQL实例","keywords":"","body":"如何创建MySQL实例 1.打开aws控制台，可以直接搜索MySQL如下 2.打开MySQL（rds）控制面板 点击启动数据库实例 3.选择引擎 根据自身需求，选择相应的数据库；这里我们选择mysql 4.选择使用案例 建议生产、测试环境都用如图所选的生成进行测试 5.指定数据库详情 如图所示，选择相应的许可模式、数据库版本、数据库实例类型、是否多可用区、存储类型、存储大小 数据库实例名称、用户名、密码 6.网络与安全 现在VPC网络、子网信息、是否公开（这里必须选择否）、可用区、安全组、 7.设置数据库信息 注意这里的数据库是使用数据库、端口、参数组、选项组 8.是否加密与备份 9.日志导出 10.是否维护 11.创建MySQL实例 "},"docs/database/how-to-modify-parameter-groups.html":{"url":"docs/database/how-to-modify-parameter-groups.html","title":"如何修改参数组","keywords":"","body":"如何修改参数组 1.在RDS控制台，打开参数组； 2.创建新的参数组 由于默认的参数组不能修改，所以需要新建一个参数组，再关联到rds实例上； 3.修改参数 找到time_zone参数的位置修改为shanghai 4.关联到实例 打开RDS控制台，选中需要修改的实例。如图 5.选中新建的参数组 6.选择立即使用 7.修改完毕后，需要重启RDS实例才能生效 8.修改完成显示 "},"docs/Networking-ContentDelivery/":{"url":"docs/Networking-ContentDelivery/","title":"网络与内容分发","keywords":"","body":"网络与内容分发 网络服务优势 灵活 扩充专用于处理要求的容量 易于使用 连线状态在单一视图中 安全 连接实体和私人虚拟网络 降低成本 无限额外费用就能使用VPC var gitalk = new Gitalk({ \"clientID\": \"5fbc2a54224065a73b38\", \"clientSecret\": \"7bf7e8d512a4afec316ee39a4d83665eee35615f\", \"repo\": \"awschinawiki\", \"owner\": \"awschina\", \"admin\": [\"15b883\"], \"id\": location.pathname, \"distractionFreeMode\": false }); gitalk.render(\"gitalk-container\"); "},"docs/Networking-ContentDelivery/route53.html":{"url":"docs/Networking-ContentDelivery/route53.html","title":"如何使用Route53解析域名？","keywords":"","body":"如何使用route53解析域名 route53控制台 IP地址解析设置 CNAME解析设置 "},"docs/Networking-ContentDelivery/vpcpeer.html":{"url":"docs/Networking-ContentDelivery/vpcpeer.html","title":"如何创建对等连接（VPC Peer）","keywords":"","body":"VPC对等连接 注意，双方的vpc网段不能重复，如果重复会造成无法配置路由表 输入双方信息 账户ID和VPC 1.1 东京账户A创建对等连接 1.2 东京账户A查看 查看连接信息 显示正在处理接受，需要另一个账户，进行授权确认 1.3 新加坡账户B查看 查看现在的显示 1.4 新加坡账户B选择接受请求 选中链接，点击操作，点击接受请求 1.5 新加坡账户B现在再看是活动状态 1.6 东京账户A查看连接状态 1.7 东京账户A，设置互通的子网 本地的VPC为172.30.0.0/16（这里的子网为私有子网） 对方的VPC为172.29.0.0/16 路由表配置如下，记住，安全组也要配置好，要不无法连接和ping通 1.8 新加坡账户B，设置互通的子网 本地的VPC为172.29.0.0/16 (这里本地的子网为公有子网) 对方的VPC为172.30.0.0/16 1.9 创建机器东京和新加坡各一台 东京查看 东京账户A IP 172.30.102.171 新加坡账户B IP172.29.10.159 网络互通 新加坡查看 东京账户A IP 172.30.102.171 新加坡账户B IP172.29.10.159 网络互通 "},"docs/Networking-ContentDelivery/vpcflowlog.html":{"url":"docs/Networking-ContentDelivery/vpcflowlog.html","title":"如何开启VPC流日志（flow log）","keywords":"","body":"流日志记录 流日志记录代表您的流日志中的网络流。每个记录捕获特定捕获窗口中的特定 5 元组的网络流。5 元组是一组 5 个不同的值，指定 Internet 协议 (IP) 流的源、目标和协议。捕获窗口是一段持续时间，在这段时间内流日志服务会聚合数据，然后再发布流日志记录。捕获窗口大约为 10 分钟，但最长可以为 15 分钟。 流日志记录语法 流日志记录是以空格分隔的字符串，采用以下格式： 下表描述了流日志记录的各个字段。 字段 描述 version VPC 流日志版本。 account-id 流日志的 AWS 账户 ID。 interface-id 为其记录流量的网络接口的 ID。 srcaddr 源 IPv4 或 IPv6 地址。网络接口的 IPv4 地址始终是其私有 IPv4 地址。 dstaddr 目标 IPv4 或 IPv6 地址。网络接口的 IPv4 地址始终是其私有 IPv4 地址。 srcport 流量的源端口。 dstport 流量的目标端口。 protocol 流量的 IANA 协议编号。有关更多信息，请参阅分配的 Internet 协议编号。 packets 捕获窗口中传输的数据包的数量。 bytes 捕获窗口中传输的字节数。 start 捕获窗口启动的时间，采用 Unix 秒的格式。 end 捕获窗口结束的时间，采用 Unix 秒的格式。 action 与流量关联的操作：ACCEPT：安全组或网络 ACL 允许记录的流量。REJECT：安全组或网络 ACL 未允许记录的流量。 log-status 流日志的日志记录状态：OK：数据正常记录到选定目标。NODATA：捕获窗口中没有传入或传出网络接口的网络流量。SKIPDATA：捕获窗口中跳过了一些流日志记录。这可能是由于内部容量限制或内部错误。 注意 如果某个字段不适用于特定记录，则记录为该条目显示一个“-”符号。 "},"docs/storage/":{"url":"docs/storage/","title":"存储","keywords":"","body":"存储服务 存储优势 灵活 随需求的变更扩展档案存储空间 弹性 选择磁盘类型 安全 透过加密和复位保护资料 降低成本 按使用量计算 var gitalk = new Gitalk({ \"clientID\": \"5fbc2a54224065a73b38\", \"clientSecret\": \"7bf7e8d512a4afec316ee39a4d83665eee35615f\", \"repo\": \"awschinawiki\", \"owner\": \"awschina\", \"admin\": [\"15b883\"], \"id\": location.pathname, \"distractionFreeMode\": false }); gitalk.render(\"gitalk-container\"); "},"docs/storage/s3.html":{"url":"docs/storage/s3.html","title":"如何理解使用S3服务（bucket）","keywords":"","body":"如何理解使用S3服务？ Amazon S3 将数据存储为存储桶中的对象。对象由文件和描述该文件的任何可选元数据组成。 要将对象存储到 Amazon S3 中，请将要存储的文件上传到存储桶中。上传文件时，可以设置对对象以及任何元数据的权限。 存储桶是存储对象的容器。您可以有一个或多个存储桶。对于每个存储桶，您都可以控制对它的访问权限 (哪些用户可以在存储桶中创建、删除和列出对象) 、查看存储桶及其对象的访问日志以及选择 Amazon S3 存储存储桶及其内容的地理区域。 S3使用的场景 备份和存储 – 为其他应用程序提供数据备份和存储服务。 应用程序托管 – 提供部署、安装和管理 Web 应用程序的服务。 媒体托管 – 构建托管视频、照片或音乐上传和下载的高可用性、冗余式、可扩展基础设施。 软件传输 – 托管可供客户下载的软件应用程序。 "},"docs/storage/how-do-use-s3-as-a-static-site.html":{"url":"docs/storage/how-do-use-s3-as-a-static-site.html","title":"如何使用S3做静态网站","keywords":"","body":"如何使用S3做静态网站 1.登录 AWS 管理控制台 并通过以下网址打开 Amazon S3 控制台：https://console.aws.amazon.com/s3/。 2.创建存储桶 3.设置静态网站托管并记录终端节点URL http://s3-website-demo.s3-website-ap-northeast-1.amazonaws.com 4.编辑阻止公有访问设置 默认情况下，Amazon S3 阻止对您的账户和存储桶的公有访问权限。如果要使用存储桶托管静态网站，您可以使用以下步骤编辑阻止公有访问设置： 5.设置公有访问权限 6.设置存储桶策略 { \"Version\":\"2012-10-17\", \"Statement\":[{ \"Sid\":\"PublicReadForGetBucketObjects\", \"Effect\":\"Allow\", \"Principal\": \"*\", \"Action\":[\"s3:GetObject\"], \"Resource\":[\"arn:aws:s3:::example-bucket/*\" ] } ] } 注意把example-bucket换成相应的桶名称 7.上传文件到S3，根目录有index.html 设置文件可以到此下载https://github.com/awschina/s3-website-demo 8.浏览器访问 http://s3-website-demo.s3-website-ap-northeast-1.amazonaws.com "},"docs/Security-Identity-Compliance/":{"url":"docs/Security-Identity-Compliance/","title":"安全性、身份与合规性","keywords":"","body":"安全性、身份与合规性 安全、身份和合规性优势 合规 符合合规需求 降低成本 节省资金 灵活 快速扩充 安全 保证资料安全 AK/SK认证 通过API网关向下层服务发送请求时，必须使用AK(Access Key ID)、SK(Secret Access Key)对请求进行签名。 说明： AK(Access Key ID)：访问密钥ID。与私有访问密钥关联的唯一标识符；访问密钥ID和私有访问密钥一起使用，对请求进行加密签名。 SK(Secret Access Key)：与访问密钥ID结合使用的密钥，对请求进行加密签名，可标识发送方，并防止请求被修改。 var gitalk = new Gitalk({ \"clientID\": \"5fbc2a54224065a73b38\", \"clientSecret\": \"7bf7e8d512a4afec316ee39a4d83665eee35615f\", \"repo\": \"awschinawiki\", \"owner\": \"awschina\", \"admin\": [\"15b883\"], \"id\": location.pathname, \"distractionFreeMode\": false }); gitalk.render(\"gitalk-container\"); "},"docs/Security-Identity-Compliance/iam.html":{"url":"docs/Security-Identity-Compliance/iam.html","title":"如何理解IAM服务","keywords":"","body":"IAM服务介绍 用户在创建 AWS 账户时，会创建一个用于登录 AWS 账户的根用户身份。可以使用此根用户身份（即，创建账户时提供的电子邮件地址和密码）登录 AWS 管理控制台。您的电子邮件地址和密码的组合也称为您的根用户凭证。 使用根用户凭证时，您可以对 AWS 账户中的所有资源进行完全、无限制的访问，包括访问您的账单信息，您还能更改自己的密码。 当您首次设置账户时，需要此访问级别。但是，我们不 建议使用根用户凭证进行日常访问。AWS特别建议您不要与任何人共享您的根用户凭证，因为如果这样做，他们可对您的账户进行无限制的访问。无法限制向根用户授予的权限。 分类如下： IAM用户 #通过根用户注册 根用户 #注册账号时电子邮箱地址和密码 role（策略）#控制权限的范围界线 IAM角色 #类似于IAM用户，但是IAM角色服务于AWS服务 AKSK # AK(Access Key ID)、SK(Secret Access Key) 比如使用AWS API、CLI、SDK和其他开发者工具的时候需要使用aksk，使用aksk操作访问服务与在console控制台访问是一样的，前者通过代码访问服务，后者通过web界面访问服务； 访问服务的范围大小由role来控制权限边界，role可以附加到单个IAM用户，用户组，角色上； 为了防止使用单个用户操作出现不必要的事故问题，我们采取，创建IAM用户进行日常工作使用，根用户是最后的保障，开启MFA，专人管理根用户账号信息 "},"docs/Security-Identity-Compliance/Create_an_IAM_user_and_log_into_the_console.html":{"url":"docs/Security-Identity-Compliance/Create_an_IAM_user_and_log_into_the_console.html","title":"创建IAM用户并登录控制台","keywords":"","body":"创建IAM用户并登录控制台 1.登录AWS控制台，打开AMI控制台、点击用户、添加用户 2.设置用户名、访问类型 选择访问类型： 如果是控制台管理人员就选择aws管理控制台访问 如果是开发人员选择编程访问 控制台密码，选择自动生成，并勾选下面需要重置密码的选择 3.设置权限 选择直接附加现有策略，选择搜索AdministratorAccess 4.标签这里可以默认忽略 5.review一下，查看没有问题后点击创建用户 6.查看登录地址 7.使用IAM用户登陆 账号ID 用户名 密码 IAM用户登陆地址 https://account-id-or-alias.signin.aws.amazon.com/console 8.控制台登录 密码策略第一次登录需要修改密码 "},"docs/Security-Identity-Compliance/how-to-create-group.html":{"url":"docs/Security-Identity-Compliance/how-to-create-group.html","title":"如何创建用户组","keywords":"","body":"如何创建用户组 "},"docs/Security-Identity-Compliance/how-to-create-acm.html":{"url":"docs/Security-Identity-Compliance/how-to-create-acm.html","title":"如何申请Certificate Manager","keywords":"","body":"如何创建ACM（Certificate Manager） AWS Certificate Manager 通俗来讲就是 SSL/TLS X.509 证书，详情请看https://docs.aws.amazon.com/zh_cn/acm/latest/userguide/acm-overview.html 1.打开ACM控制台 登录AWS ACM https://console.aws.amazon.com/acm/home 2.选择请求公有证书 键入要使用SSL/TLS 证书保护的站点的完全限定域名 (例如，www.example.com)。使用星号(*) 创建通配符证书以保护同一域中的若干站点。 例如，*example.com www.example.comsite.example.com images.example.com 3.选择验证方法 使用DNS验证比较方便，而且后期续订也方便 4.审核并请求 5.验证 点击在route53中创建记录，就会自动配置到route53中 6.route53控制台查看 7.AWS Certificate Manager控制台查看 如下图，已经显示验证成功 8.ELB进行配置查看 "},"docs/Security-Identity-Compliance/how-to-import-acm.html":{"url":"docs/Security-Identity-Compliance/how-to-import-acm.html","title":"如何导入Certificate Manager","keywords":"","body":"如何导入外部证书 1.购买或者申请免费的证书 阿里云、七牛云等等 2.上传证书 打开EC2的负载均衡 选择相应的ALB 添加侦听器 选择https 端口443 选择目标组 证书类型 上传证书到IAM 证书名称填写申请证书时候的那个域名 私有密钥，填写申请的那个后缀为key的文件直接复制到里面 公有密钥证书，填写后缀为pem文件，直接复制到如下图 点击创建 "},"docs/Security-Identity-Compliance/iam-mfa.html":{"url":"docs/Security-Identity-Compliance/iam-mfa.html","title":"IAM用户启用MFA","keywords":"","body":"IAM用户启用MFA 1.1 下载MFA软件 我这里选择Google的Authenticator 1.2 进入IAM控制台 搜索IAM，点击进入 1.3 选择需要设置MFA的用户 1.4 选择安全证书 1.5 管理MFA设置 这里选择虚拟MFA https://aws.amazon.com/cn/iam/details/mfa/ 这里就是之前下载的Google的Authenticator 1.6 生成QR代码 IAM 将生成并显示虚拟 MFA 设备的配置信息，包括 QR 代码图形。 此图形是秘密配置密钥的表示形式，适用于不支持 QR 代码的设备上的手动输入。 1.7 Authenticator扫码验证 在扫码后，会生成一个6位数的一次性密码。 Authentication Code 1 输入验证码 等30秒后 Authentication Code 2 再次输入验证码 1.8 成功关联 1.9 网页登陆验证 "},"docs/Security-Identity-Compliance/guardduty.html":{"url":"docs/Security-Identity-Compliance/guardduty.html","title":"如何使用GuardDuty","keywords":"","body":"Amazon GuardDuty 智能威胁检测，以保护您的 AWS 账户和工作负载、 Amazon GuardDuty 是一项持续安全监控服务，可分析和处理以下数据源： VPC 流日志、AWS CloudTrail 事件日志和 DNS 日志 它使用威胁情报源 (例如，恶意 IP 和域的列表) 和机器学习来标识您 AWS 环境中意外的和未经授权的恶意活动。这包括了特权升级、使用遭暴露的凭证或者与恶意 IP、URL 或域通信等问题。 例如，GuardDuty 可检测提供恶意软件或进行比特币挖矿的受损 EC2 实例。此外，它还监控 AWS 账户访问行为是否有受损迹象，如未经授权的基础设施部署 (例如在从未使用过的区域中部署的实例) 或异常的 API 调用 (例如更改密码策略以减小密码强度)。 GuardDuty 通过生成安全结果向您通知 AWS 环境的状况，您可以在 GuardDuty 控制台中或者通过 Amazon CloudWatch 事件来查看。 "},"docs/management-governance/":{"url":"docs/management-governance/","title":"管理与监督","keywords":"","body":"管理和管控服务 管理和管控服务优势 可靠 提供一致的控制能力 易于使用 以程序设计方式完成构建 监控 收集并追踪指标 管理 符合管控及合规需求​ var gitalk = new Gitalk({ \"clientID\": \"5fbc2a54224065a73b38\", \"clientSecret\": \"7bf7e8d512a4afec316ee39a4d83665eee35615f\", \"repo\": \"awschinawiki\", \"owner\": \"awschina\", \"admin\": [\"15b883\"], \"id\": location.pathname, \"distractionFreeMode\": false }); gitalk.render(\"gitalk-container\"); "},"docs/best-practice/vpc.html":{"url":"docs/best-practice/vpc.html","title":"VPC最佳实践","keywords":"","body":"VPC最佳实践 创建自定义VPC 自定义VPC设置，不实用默认VPC。确保后期扩展的网络，不同业务之间网络区分不同路由与子网​ 监控VPC 流量活动 开启 vpc flow log 使用NAT 使用nat进行上网，保证网络安全，不暴露多余IP 控制访问 使用IAM进行不同用户不同权限。对于实例服务，优先考虑role 使用NACL 部署IDS/IPS 或其他第三方安全产品 创建不同VPC，降低爆炸半径 不同环境使用不同的VPC 保护VPC WAF VPN 使用SG对分层进行保护 使用安全组，对于不同的业务模块设置不同的安全组，只开启必要的端口​ "},"docs/best-practice/iam.html":{"url":"docs/best-practice/iam.html","title":"IAM最佳实践","keywords":"","body":"IAM最佳实践 删除root用户 access key 启用MFA 使用role替代user 定期使用 access advisor AWS 根账户凭证仅用于最少的所需活动 正在使用 AWS Marketplace 解决方案 SAML 集成 Web 联合身份 AWS Security Token Service (STS) 用于跨账户访问的 IAM 角色 "},"docs/best-practice/data.html":{"url":"docs/best-practice/data.html","title":"数据安全最佳实践","keywords":"","body":"数据安全最佳实践 加密 使用KMS 定期更换密钥 对数据进行分类 使用TLS保证传输安全 S3 桶策略 基于VPN的解决方案 私有连接（例如AWS Direct Connect） 正在使用AWS Marketplace 解决方案 "},"docs/best-practice/ec2.html":{"url":"docs/best-practice/ec2.html","title":"服务器安全最佳实践","keywords":"","body":"服务器安全最佳实践 使用IAM role替代IAM user 使用ELB SG配置 WAF 或 Shield 安全访问 备份与恢复 termination protection "},"docs/best-practice/monitoring-record-audit.html":{"url":"docs/best-practice/monitoring-record-audit.html","title":"监控、记录和审计最佳实践","keywords":"","body":"监控、记录和审计 记录everything 通过CloudTrail 启用CloudWatch 通过Cloudwatch监控服务状态 持续合规 trusted advisor给建议 Config通知变更 自动合规和审计 综合利用CloudTrail、SNS、LAMBDA、CONFIG RULE、WATCHLOG、ALERT、INSPECTOR "},"docs/white-paper/readme.html":{"url":"docs/white-paper/readme.html","title":"AWS 白皮书学习","keywords":"","body":"AWS 白皮书 "},"docs/white-paper/well-architected-framework.html":{"url":"docs/white-paper/well-architected-framework.html","title":"良好的框架","keywords":"","body":"良好的框架 设计原则 停止猜测您的容量需求 在生产规模下测试系统 降低架构更改的风险 通过自动化来简化架构实验 支持进化式架构 4（6）个支柱 框架 卓越运营支柱 安全性支柱 可靠性支柱 性能效率支柱 成本优化支柱 "},"docs/white-paper/shared-responsibility-model.html":{"url":"docs/white-paper/shared-responsibility-model.html","title":"责任共担模型","keywords":"","body":"责任共担模型 1.安全性和合规性是 AWS 和客户的共同责任。 2.AWS 负责“云本身的安全” 保护运行所有 AWS 云服务的基础设施，该基础实施由运行 AWS 云服务的硬件、软件、网络和设备组成。 3.客户负责“云内部的安全” 客户所选的云服务 执行所有必要的安全配置和管理任务 客户负责管理用户操作系统（包括更新和安全补丁）、其他相关应用程序软件以及 AWS 提供的安全组防火墙的配置。客户应该仔细考虑自己选择的服务，因为他们的责任取决于所使用的服务、，这些服务与其 IT 环境的集成以及适用的法律法规。 4.IT控制体系 继承控制体系 – 客户完全继承自 AWS 的控制体系。 物理和环境控制体系 共享控制体系 – 同时适用于基础设施层和客户层，但位于完全独立的上下文或环境中的控制体系。在共享控制体系中，AWS 会提出基础设施方面的要求，而客户必须在使用 AWS 服务时提供自己的控制体系实施。示例包括： 补丁管理 – AWS 负责修补和修复基础设施内的缺陷，而客户负责修补其来宾操作系统和应用程序。 配置管理 – AWS 负责维护基础设施设备的配置，而客户负责配置自己的来宾操作系统、数据库和应用程序。 认知和培训 – AWS 负责培训 AWS 员工，而客户必须负责培训自己的员工。 特定于客户的控制体系 – 完全由客户负责（基于其部署在 AWS 服务中的应用程序）的控制体系。示例包括： 需要客户在特定安全环境中路由数据或对数据进行分区的服务和通信保护或分区安全性。 "},"docs/china/":{"url":"docs/china/","title":"大中华区","keywords":"","body":"大中华区 AWS中国区账号只能由企业才能申请 需要备案才能使用80/8080/443三个端口 由于国内ICP管理的缘故，80/8080/443三个端口的入站流量是被临时封闭的 备案IP地址查找及获取： 请确保您提交ICP备案信息时，IP信息的准确性和完整性。同时，请不要释放或变更ICP备案申请所使用的 IP地址，一旦IP地址变更，您将需要重新进行备案。请注意，任何信息不准确或不完整均可能导致您的网站 的运营受到影响。 AWS提供3种IP类型：EIP（即弹性IP），ELB预留IP，公有IP（Public IP）。只有EIP和ELB预留IP才 可以用来提交ICP备案，您根据实际应用场景，来选择正确的IP地址提交备案申请。 EIP（弹性IP）： 为了避免不必要的 IP 更新而导致备案延误，建议您针对 EC2 实例使用 EIP（弹性 IP）。 EIP 申请操 作请查看《AWS ICP备案使用EIP地址指南》。如果您使用EIP，请注意不要随意释放ICP备案时提 交的IP地址。如果您释放EIP或者使用了新的EIP，您需要更新您的ICP备案 ELB预留IP： 若您需要使用 ELB 发布网站服务，默认情况下， ELB 提供服务的 IP 地址有可能会发生改变。我们建 议您为ELB申请预留IP地址，申请ELB预留IP操作请查看《AWS ICP备案使用ELB预留IP地址指 南》； Public IP（公有IP）： 我们不推荐使用自动分配的公有 IP 地址来提交备案申请。因为当公有 IP 地址与您的实例取消关联后， 该地址不能保证可以再次被您使用，同时，您无法手动关联或取消关联公有 IP 地址。 "},"docs/china/sinnet.html":{"url":"docs/china/sinnet.html","title":"光环新网","keywords":"","body":"光环新网 公司官网：http://www.sinnet.com.cn/ 北京光环新网科技股份有限公司联系方式： 邮件联系方式：sin-icp@sinnet.com.cn 电话联系方式：4000988000-2 自助网站备案平台：www.ghxwicp.com http://www.sinnet.com.cn/service.aspx?PartNodeId=35 http://www.sinnet.com.cn/content.aspx?PartNodeId=89#pt89 "},"docs/china/nwcdcloud.html":{"url":"docs/china/nwcdcloud.html","title":"西云数据","keywords":"","body":"西云数据 公司网址：https://www.nwcdcloud.cn/ 宁夏西云数据科技有限公司联系方式： 邮件联系方式：icp@nwcdcloud.cn 电话联系方式：10100966-4 自助网站备案平台：https://icp.nwcdcloud.cn/ "},"docs/china/china-faq.html":{"url":"docs/china/china-faq.html","title":"常见问题","keywords":"","body":"中国区的一些注意事项 中国区没有ACM服务 要申请证书,从第三方购买或获取SSL 绑定在AWS上，AWS中国是支持SSL服务的。 AWS在中国有防DDoS和WAF服务吗？ 在中国有很多专业的第三方合作伙伴帮助客户提供防DDoS和WAF的服务。 端口开放需要等待多久？ 端口开放是针对账号，不仅是所有服务器，也包括S3等服务。开放以后，大约2小时即可使用。 一些不常见的域名是否可以备案？ 1、直接发邮件到光环新网或者西云数据 2、此网站查询http://域名.信息 中国区账号和海外区账号有什么区别？ 根据业务和用户的分布区域，来选择注册中国区/海外区账户。因为中国区服务器在北京和宁夏，国内用户访问速度快，所以如果主要用户在国内，就推荐用中国区服务；如果用户主要在海外，就推荐使用海外区。 "},"docs/case/":{"url":"docs/case/","title":"案例分析","keywords":"","body":"案例（故障）分析 工作日常遇到的问题进行分析整理，并提供分析思路 "},"docs/case/unable-to-ssh-remote-connection-to-ec2-instance.html":{"url":"docs/case/unable-to-ssh-remote-connection-to-ec2-instance.html","title":"无法SSH连接到远程的EC2实例","keywords":"","body":"无法SSH连接到远程的EC2实例 在ssh登录失败时，根据报错的信息进行相应的处理 如何登陆远程实例请看这边文章： 如何远程连接创建的EC2实例 两大类报错类型： 连接超时 Connection Timed Out。 通常是 网络设置错误，请检查对应的 IP , 安全组，ACL，子网路由表，网络环境等。 权限相关 Permission Denied 或者提示 Key 相关错误。通常是 秘钥或者用户名 的问题。 1、连接超时 问题描述 创建并启动了EC2实例，但是无法使用SSH或通过SSH连接的实用工具（如 Xshell）连接到实例。在连接到实例时，连接超时，出现类似以下内容的错误：Network error: Connection timed out 或者 Error connecting to [instance], reason: -> Connection timed out: connect。 该问题通常是由于安全组，路由表，网络 ACL 等网络配件；设置不正确导致的。请按照故障排除中的几个步骤检查网络环境。 1.1 检查安全组 安全组中的 source 为允许访问的 ip 源， port 为允许访问的端口。这是最常见的错误。 请检查该实例是否有开放 22 端口，并且允许您的 ip 段访问（source）。为了安全考虑，请尽量讲您的 source 定义为只允许特定的 ip 地址段访问（如下图所示，单个ip 需要在最后加/32的后缀）， 请检查当前机器的 ip 是否符合此 ip 段。 如果在办公局域网中， 您的ip地址可能无法固定；每次上网会发生变化，在这种情况下，此时建议设置源IP为办公网络的ip范围段。 默认情况下实例无法 ping 通，如果需要ping需要在安全组打开ICMP协议 打开 Amazon EC2 控制台。 在导航窗格中，选择 Instances。 查找要通过 SSH 连接的 EC2 实例。 在屏幕底部的 Description 选项卡中，选择要连接的 EC2 实例的安全组。 在屏幕底部的窗格中的 Inbound (入站) 选项卡中，确保设置了允许从当前公有 IP 地址进行 SSH 访问的规则。 如果设备所使用的 IP 不在列表中，请选择 Edit，然后选择 Add rule。 对于 Source，选择 您当前使用的IP 。 0.0.0.0/0 代表对所有 ip 开放。 选择 Save。 1.2 检查子网是否为公有子网 公有子网是指允许 Internet 访问的子网。如果您的 EC2 在私有子网中，外界 Internet 是无法进行连接的， ssh 也会失败。 检查方法是，选择 VPC 服务，在 左侧的路由表（Route Table）中，选择 EC2 所在的子网，检查路由设定。 如果有红框所标注的指向 Internet 网关的路由，则子网为公有子网，这一步没有问题。请检查下一步。 如果缺失指向网关的路由，需要编辑并创建将 0.0.0.0/0 指向您的 Internet 网关 ID 的路由 （如图中红框所示）。如果该 VPC 中没有网关 ( IGW ), 则需要先添加一个。如不知道如何操作，请阅读图下方的详细步骤教程。 打开 Amazon VPC 控制台。 在导航窗格中，选择Route Tables，然后从列表中选择您的VPC路由表。在Routes (路由) 选项卡中，确保有指向Internet网关的默认路由。 如果没有，请从导航窗格中选择Internet Gateways，并复制您的Internet网关ID。如果没有Internet网关，请创建一个并将其连接至您的VPC。确保复制新Internet网关的ID。返回到Route Tables，然后选择Routes选项卡。编辑并创建将0.0.0.0/0指向您的Internet网关ID的路由，保存路由表。 1.3 检查子网的网络访问控制列表 (ACL) ACL 为子网级别的防火墙，默认网络 ACL 允许所有入站和出站流量。如果您没有对 ACL 进行过任何更改，请跳过这一步 。 打开 Amazon VPC 控制台。 在导航窗格中，选择 Subnets，然后选择您的子网。 在 Description (描述) 选项卡上，找到 Network ACL (网络 ACL)，然后选择其 ID (acl-xxxxxxxx)。 选择网络 ACL。对于 Inbound Rules，验证规则是否允许来自您的计算机的流量。如果不允许，请删除或修改阻止来自您 的计算机的流量的规则。对于 Outbound Rules，验证规则是否允许到您的计算机的流量。如果不允许，请删除或修改阻止 到您的计算机的流量的规则。 1.4 确认IP地址是否发生变化 如果您曾经对实例进行过关机，然后再次开机的操作（在控制台上表现为，曾经对实例进行过 stop 然后 start 的操作）。在没有绑定弹性 ip 的情况下，您的ip地址已经发生变化，请在控制台上再次确认此时的 ip 地址。以下为具体操作步骤： 在导航窗格中，选择 Instances。 查找要通过 SSH 连接的 EC2 实例。 在屏幕底部的 Description 选项卡中，查看 Public IP 与您正在使用的 ip 地址是否一致。如果 IP 地址已经发生变化，请使 用新的 IP 地址。 1.5 镜像的检查 请检查目前您使用的是否是官方的 AMI （镜像）。AWS的官方镜像一般在 Quick Start 当中，对于CentOS，在Marketplace中。 如果 Quick Start 含有您想要的操作系统，请尽量选择 Quick Start 中的镜像。 对于有些不在Quick Start中的镜像，如 CentOS , 在Marketplace 当中是提供的。请选择 Marketplace 发布的镜像。 Markeplace 为厂家直供的 AMI。 除非您确定某个 AMI 的安全性，尽量不要使用 community 的镜像。community 属于个人发布的镜像，AWS 无法监管， 可能有些社区版的镜像做了一些特殊的安全管理和控制，因此无法直接 ssh 上去。这种情况下，换成官方或者 Marketplace 上的镜像即可。 1.6检查实例负载 检查实例上的负载，服务器可能已超过负载，导致sshd服务无法正常工作，无法接受新的 ssh 请求。可以通过观察 Cloudwatch 的指标确认此类问题。此时最简单的方式是可以尝试 通过 reboot 的方式是否能够解决。如不能，可以通过 system manager 的 session manager 工具尝试打开一个 session进行相应的command操作kill掉一些不必要的资源。 1.7其他原因 如果上述步骤您经过检查都没有问题，请检查以下原因： ● 22端口被屏蔽：您目前是否处于办公或者酒店等公共WIFI区域，请核实该公共网络是否封禁了22端口，或者换个网络试试看。 ● 您电脑自身是否有防火墙屏蔽了22端口。 如果所有网络设置都正确，您仍然无法登录到实例；或者您未改动过任何实例配置，实例负载也正常的情况下，突然无法ssh上去，有可能您的实例当前IP被墙。请您尝试用境外网络 (比如换一台海外的EC2用于ssh，或者设置海外代理) 尝试一下是否能够ssh上去确认此问题。 如果被墙，解决方法为 更换当前 IP 地址。 如果是EC2-Classic 弹性 IP可以通过stop 实例，然后再次start 实例 ，来更换IP地址。 如果是EC2-VPC 弹性 IP可以重新申请一个EIP， 然后绑定到EC2。此时IP会换为EIP的地址。 2、权限相关 2.1 问题描述 创建并启动了EC2，但是无法使用SSH连接到实例，报错信息包括：Host key not found in [directory]、Permissiondenied (publickey) 或 Authentication failed, permission denied。此问题通常因为秘钥或者用户名错误导致的权限问题。 2.1检查秘钥对是否正确 1、每个EC2在启动的时候会有一个秘钥，此秘钥为第一次登录到EC2上的唯一方法，且只有启动实例前可以下载。请首先选中您的实例，在 Description 页面查看秘钥对的名称，确保您使用了正确的秘钥。 2、如果此项为空，则您无法ssh到该实例，请关闭该实例，重新启动新实例，并且记得下载秘钥。如果您不清楚如何启动实 例，请参考启动虚拟机十分钟教程 如果您已经丢失了该秘钥对，请参考丢失秘钥时如何连接到实例。 2.2 用户名错误 如果您使用了官方镜像，正确的用户名如下所示： Amazon Linux 2 或 Amazon Linux AMI，用户名称是ec2-user 或 root CentOS AMI，用户名称是 centos Debian AMI，用户名称是 admin 或 root Fedora AMI，用户名为 ec2-user 或 fedora RHEL AMI，用户名称是 ec2-user 或 root SUSE AMI，用户名称是 ec2-user 或root Ubuntu AMI，用户名称是 ubuntu 2.3 检查您的秘钥格式 通常，ssh 所需要的秘钥为pem格式的（从控制台下载的秘钥即为此格式）。 如果您是用 第三方工具 ssh-keygen 产生的秘钥，默认情况下，它会生成 OpenSSH 的密钥格式。此时报错Private key must begin with \"-----BEGIN RSA PRIVATE KEY-----\" and end with -----END RSA PRIVATE KEY----\"。解决方法为 使用 ssh-keygen -m PEM 创建秘钥 如果您使用windows机器，利用putty或者xshell登录，需要先做一个从pem格式到ppk格式的转换，具体操作，请参考在windows上如何利用 putty 登录 2.4 检查秘钥权限 如果遇到错误bad permissions: ignore key: my_private_key.pem Permission denied (publickey). 这种情况是因为您的私钥文件权限太大，任何用户都可以对其进行读写操作，此时，为了保护您的私钥文件，SSH会忽略您的密钥。解决方法为，通过以下命令更改秘钥权限：chmod 400 my_private_key.pem 此时其他报错提醒语句可能包含：Permissions 0777 for 'my_private_key.pem' are too open. It is required that your private key files are NOT accessible by others. This private key will be ignored. 2.5 konwn_host相关错误 此情况通常见于切换了EIP等情况，比如EIP曾经挂载在机器A上，用了秘钥A，此时切换了EIP到机器B上，对应的秘钥为秘钥B，这时此 IP 的known_host对应record不匹配。 解决方法为：打开 known_host 文件 （Linux /mac 地 址: ~/.ssh/known_host ) 删除此 IP 的对应 record。 man ssh的解释 ssh automatically maintains and checks a database containing identification for all hosts it has ever been used with. Host keys are stored in ~/.ssh/known_hosts in the user's home directory. Additionally, the file /etc/ssh/ssh_known_hosts is automatically checked for known hosts. Any new hosts are automatically added to the user's file. If a host's identification ever changes, ssh warns about this and disables password authentication to prevent server spoofing or man-in-the-middle attacks, which could otherwise be used to circumvent the encryption. The StrictHostKeyChecking option can be used to control logins to machines whose host key is not known or has changed. "},"docs/case/windows-unable-to-generate-password.html":{"url":"docs/case/windows-unable-to-generate-password.html","title":"Windows实例无法生成密码","keywords":"","body":"Windows实例无法生成密码 故障发现过程： 1、启动一个windows系统的实例。 2、暂停实例，（并没有远程登录到windows桌面） 3、创建AMI（ami-123456） 4、复制AMI得到新的AMI（ami-654321），加密OS系统盘，使用aws默认加密方式aws/ebs 5、使用加密的AMI（ami-654321）启动一个新的实例 6、在控制台选择新建的EC2实例，点击连接，发现无法生成密码（密码不可用） 解决方法： 有两种解决方式 方式一： 1、创建一个实例 2、生成密码后，输入密码登录到系统 3、停止实例，创建新的AMI 4、使用新的AMI进行启动实例，并登录（这个登录密码是第2步的那个密码） 方式二： 1、创建一个实例 2、生成密码后，输入密码登录到系统 3、开启EC2setpassword，参考下面链接 （https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/WindowsGuide/ec2launch.html#ec2launch-sysprep） 4、停止实例，创建AMI 5、使用这个AMI启动新的实例（这个密码可以随机生成） "},"docs/aws-uniqueness.html":{"url":"docs/aws-uniqueness.html","title":"AWS的独特之处是什么","keywords":"","body":"AWS的独特之处是什么？ 企业级领导地位 AWS的业务从2006年开始运营，为最小型的新创公司和最大型的企业提供服务超过12年，使我们那成为市场最成熟的云端平台 服务的广度与深度 AWS目前拥有超过165项服务，且仍持续以极快速度扩充平台。服务范围从核心运算服务、业务程序服务、数据库和分析、再到机器学习和IoT，可以说是应有尽有、包罗万象 创建步伐 AWS拥有极快的创新步伐，我在2018年提供超过1927项全新的客户导向功能，此前在2017年为1430项，2016年为1017项 触及全球 AWS拥有全球最大的触及范围，遍布全球20个地理区域的61个可用区域，且我们也已宣布计划再增加12个可用区域和4个AWS区域 Amazon文化 Amazon长期以来都有顾客至上的文化。「顾客至上」这项原则反映在定价值哲学中，包含至今为止72次降价，也会反映在AWS将创新蓝图聚焦在客户要求的方式上 最大合作伙伴社群 从2016年起，AWS合作伙伴（APN）至今已有成千上万家顾问及技术合作伙伴，其中包含35000家新加入的APN合作伙伴。AWS了解，合作伙伴服务与解决方案能够帮助客户获取成功 安全性 保护客户资料是AWS的优先要务，我们的全球基础设施，正事按照安全业界最佳实务及最高合规标准所设计及管理。AWS拥有58项合规认证 混合云端 AWS可为客户提供所有云端供应商中最广泛多元的混合功能。客户可选择在现场部署和云端中，或在最符合他们业务需求的混合部署中执行他们的工作负载 "},"docs/aws-leadership-qualifications.html":{"url":"docs/aws-leadership-qualifications.html","title":"亚马逊14条领导力准则","keywords":"","body":"亚马逊14条领导力准则 1、Customer Obsession 顾客至上 努力成为“最以客户为中心”的公司，从客户方方面面入手，再反向推动工作。​ 2、Ownership 主人翁精神 作为主人翁，要从长远考虑，不会为了短期业绩而牺牲长期价值，绝不会说“那不是我的工作”。​ 3、Invent and Simplify 创新简化 期望并要求自己的团队进行创新和发明，并始终需求使工作简化的方法。 4、Are Right，A Lot 决策正确 要拥有卓越的业务判断能力和敏锐的直觉，并需求多样的视角，并挑战自己的观念。 5、Learn and Be Curious 好奇求知 要对各种可能性充满好奇并付于行动加以探索。 6、Hire and Develop the Best 选贤育能 要不断提升招聘和晋升员工的标准，寻找到优秀的人才，并帮他们创建职业发展机遇。 7、Insist on the Highest Standards 最高标准 要有近乎严苛的高标准--这些标准在很多人看来可能高的不可理喻。领导者不断提供标准，激励自己的团队提高优质产品、服务和流程。 8、Think Big 远见卓识 要大胆提出阐明大局策略，从不同角度考虑问题，并广泛寻找服务客户的方式。 9、Bias for Action 崇尚行动 速度对业务影响至关重要。很多决策和行动都可以改变，因此不需要进行过于广泛的推敲。提倡在深思熟虑前提喜爱进行冒险。 10、Frugality 勤俭节约 力争以更少的投入实现更大的产出。勤俭节约可以让我们开动脑筋、自给自足并不断创新。​ 11、Earn Trust 赢得信任 坦诚沟通，敢于自我批评，即便这样做会令自己尴尬或难堪。 12、Dive Deep 刨根问底 深入各个环节，随时掌控细节，经常进行审核。 13、Have Backbone；Disagree and Commit 敢于谏言，服从大局 必须要能够不卑不亢地质疑无法苟同的决策，哪怕这样做让人心烦意乱，精疲力尽。不会为了保持一团和气而屈就妥协。一旦做出决定，他们就会全身心地致力于实现目标。 14、Deliver Results 达成业绩 关注业务的关键决定条件，确保工作质量并及时完成。即使遭受挫折，也从不气馁。 "},"docs/about-the-message.html":{"url":"docs/about-the-message.html","title":"关于留言","keywords":"","body":" 关于留言 ![img](https://img.mubu.com/document_image/8a53bfcc-c27b-458d-8ea2-5f227c15a402-2914095.jpg) 欢迎大家留言讨论。 var gitalk = new Gitalk({ \"clientID\": \"5fbc2a54224065a73b38\", \"clientSecret\": \"7bf7e8d512a4afec316ee39a4d83665eee35615f\", \"repo\": \"awschinawiki\", \"owner\": \"awschina\", \"admin\": [\"15b883\"], \"id\": location.pathname, \"distractionFreeMode\": false }); gitalk.render(\"gitalk-container\"); "}}